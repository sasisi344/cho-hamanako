# 📊 構造化データ（Frontmatter）定義ルール

このドキュメントでは、釣りポイントやガイド記事のフロントマター（YAML）で使用する構造化データの定義と運用ルールを規定します。これにより、将来的な **Astro上でのフィルタリング** や、**Streamlitを使用した地図データベース連携** を確実に実行できる基盤を維持します。

---

## 🏗️ 共通設計方針

1. **データ型の一致**: Astroの `src/content/config.ts` (Zod Schema) と完全に同期させる。
2. **SEOカニバリズム防止**: 直近の記事作成では、既存WPサイトとの競合を防ぐために必ず `noindex: true` を付与する。
3. **真偽値（Boolean）の活用**: フィルタリングの高速化のため、施設有無などは可能な限り `true` / `false` で管理する。
4. **ユーザー体験（UX）優先**: ユーザーの検索需要が高い項目（車横付け、トイレ、ターゲット魚種など）を必須メタデータとする。

---

## 🛠️ 要素定義（Schema Detail）

### 1. 📍 Location (位置情報)
地図アプリやStreamlit連携の核となるデータ。

| プロパティ名 | 型 | 説明 | 備考 |
| :--- | :--- | :--- | :--- |
| `name` | string | スポットの正式名称 | 乙女園、新居弁天など |
| `address` | string | スポットの住所（概略可） | 静岡県浜松市... |
| `lat` | float | **緯度** | Google Mapsから取得 |
| `lng` | float | **経度** | Google Mapsから取得 |
| `googleMapUrl`| url | Google Mapsへの直リンク | 公式URLを推奨 |

### 2. 🎣 Fishing Info (釣り情報)
ターゲット選定や難易度によるフィルタリングに使用。

| プロパティ名 | 型 | 説明 | 備考 |
| :--- | :--- | :--- | :--- |
| `difficulty` | enum | **難易度** | `Beginner`, `Intermediate`, `Advanced` |
| `familyFriendly`| boolean| **ファミリー向け特化** | 安全性が高く、記事内容が家族向けなら `true` |
| `bestSeason` | array | おすすめの季節 | `["春", "夏"]` など |
| `methods` | array | 推奨される釣り方 | `["サビキ釣り", "投げ釣り"]` |
| `targetFish` | array | 主なターゲット魚種 | `["アジ", "キス", "シーバス"]` |

### 3. 🚗 Facilities (施設・設備)
ユーザーの利便性に直結する、最も強力なフック要素。

| プロパティ名 | 型 | 説明 | 備考 |
| :--- | :--- | :--- | :--- |
| `parking` | boolean | 駐車場の有無 | 公共、または有料駐車場 |
| `parkingFee` | string | 駐車料金 | "無料"、"500円/回" など |
| `toilet` | boolean | トイレの有無 | 徒歩圏内（3分以内） |
| `convenienceStore`| string | コンビニの有無/距離 | "近隣に有り"、"車で5分" など |
| `nightFishing` | boolean | 夜釣りが可能か | 釣り禁止区域等の考慮 |
| `streetLights` | boolean | 常夜灯の有無 | 夜間の安全・集魚効果 |
| `carSide` | boolean | **車横付け可能** | 堤防のすぐ横に駐車して釣れるなら `true` |

---

## 📝 運用上の最重要ルール

1. **「車横付け (carSide)」の厳格運用**
    - ユーザー需要が非常に高いため、たとえガイド記事であっても「車横付け」について言及している場合は、メタデータに `carSide: true` を設定すること。
2. **「ファミリー向け (familyFriendly)」の基準**
    - 単に釣りができるだけでなく、「足場が良い」「柵がある」「トイレが近い」など、子供連れで安心して楽しめる条件を備えている場合に `true` とする。
3. **精密な座標入力**
    - 緯度緯度は、Streamlitでの地図プロットに直接使用されるため、可能な限り釣り座の中心点を指定する。
4. **小文字・ハイフン繋ぎの徹底 (Slug)**
    - ファイル名および `slug` パラメータは、必ず英小文字とハイフンのみで構成する。
5. **画像生成プロンプトによる「リズム」の創出**
    - 記事の可読性を高めるため、適切な位置に **画像生成プロンプト** をコメントアウト形式で挿入する。詳細は `skills/writing-style.md` を参照。

---

## 🔄 今後の拡張計画
- **Streamlit連携**: 本ルールに基づいて蓄積されたMarkdownファイルを解析し、リアルタイムで浜名湖釣りマップを生成。
- **動的レコメンド**: `familyFriendly: true` の記事同士を自動的に「あわせて読みたい」に関連付け。

---
最終更新：2026-02-08
管理：GEMINI Project Architect
